import{u as C}from"./persona-C41yTrOM.js";import{i as V,j,k as h,c as p,o as b,a as e,t as a,d as m,v as g,l as E,b as $,w as N,q as U,r as P,F as k,n as M,m as T,f as y}from"./app-w268HYa9.js";import{_ as A}from"./Header-CSkIi5K8.js";import"./auth-hYRPVBqP.js";/* empty css            */const B={class:"bg-white shadow-md rounded-lg p-4 space-y-4"},D={class:"text-lg font-semibold"},F={class:"col-span-2 flex gap-2"},G={type:"submit",class:"bg-blue-500 hover:bg-blue-600 text-white rounded-lg py-2 px-4"},L={__name:"PersonaForm",props:{personaSeleccionada:{type:Object,default:null}},emits:["guardado"],setup(w,{emit:v}){const u=w,c=v,r=C(),n=()=>{Object.assign(o,{id:null,nombres:"",apellidos:"",tipo_documento:"CC",documento:"",email:"",telefono:""})},o=V({id:null,nombres:"",apellidos:"",tipo_documento:"CC",documento:"",email:"",telefono:""});j(()=>u.personaSeleccionada,f=>{f?Object.assign(o,f):n()},{immediate:!0});const d=h(()=>!!o.id),_=async()=>{d.value?await r.actualizarPersona(o.id,o):await r.crearPersona(o),c("guardado"),n()};return(f,s)=>(b(),p("div",B,[e("h2",D,a(d.value?"Editar Persona":"Registrar Persona"),1),e("form",{onSubmit:N(_,["prevent"]),class:"grid grid-cols-2 gap-3"},[m(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>o.nombres=t),placeholder:"Nombres",class:"border rounded-md p-2 w-full"},null,512),[[g,o.nombres]]),m(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>o.apellidos=t),placeholder:"Apellidos",class:"border rounded-md p-2 w-full"},null,512),[[g,o.apellidos]]),m(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>o.tipo_documento=t),class:"border rounded-md p-2 w-full"},[...s[6]||(s[6]=[e("option",{value:"CC"},"Cédula",-1),e("option",{value:"TI"},"Tarjeta Identidad",-1)])],512),[[E,o.tipo_documento]]),m(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>o.documento=t),placeholder:"Número Documento",class:"border rounded-md p-2 w-full"},null,512),[[g,o.documento]]),m(e("input",{"onUpdate:modelValue":s[4]||(s[4]=t=>o.email=t),placeholder:"Email",class:"border rounded-md p-2 w-full"},null,512),[[g,o.email]]),m(e("input",{"onUpdate:modelValue":s[5]||(s[5]=t=>o.telefono=t),placeholder:"Teléfono",class:"border rounded-md p-2 w-full"},null,512),[[g,o.telefono]]),e("div",F,[e("button",G,a(d.value?"Actualizar":"Guardar"),1),d.value?(b(),p("button",{key:0,type:"button",onClick:n,class:"bg-gray-400 hover:bg-gray-500 text-white rounded-lg py-2 px-4"}," Cancelar ")):$("",!0)])],32)]))}},O={class:"bg-white shadow-md rounded-lg p-4"},z={class:"flex justify-between items-center mb-3"},I={class:"w-full text-left border-collapse"},R={class:"p-2"},q={class:"space-x-2"},Q=["onClick"],H=["onClick"],J={key:0},K={class:"flex justify-center items-center gap-3 mt-4"},W=["disabled"],X=["disabled"],x=5,Y={__name:"PersonaTable",emits:["editar"],setup(w,{emit:v}){const u=v,c=C();U(()=>{c.fetchPersonas()});const r=P(""),n=h(()=>c.personas.filter(t=>`${t.nombres} ${t.apellidos} ${t.documento} ${t.email}`.toLowerCase().includes(r.value.toLowerCase()))),o=P(1),d=h(()=>Math.ceil(n.value.length/x)),_=h(()=>{const t=(o.value-1)*x;return n.value.slice(t,t+x)}),f=()=>{o.value<d.value&&o.value++},s=()=>{o.value>1&&o.value--};return(t,i)=>(b(),p("div",O,[e("div",z,[i[1]||(i[1]=e("h2",{class:"text-lg font-semibold"},"Personas Registradas",-1)),m(e("input",{"onUpdate:modelValue":i[0]||(i[0]=l=>r.value=l),type:"text",placeholder:"Buscar...",class:"border rounded-md p-2 w-64"},null,512),[[g,r.value]])]),e("table",I,[i[3]||(i[3]=e("thead",null,[e("tr",{class:"border-b bg-gray-100"},[e("th",{class:"p-2"},"Nombre"),e("th",null,"Documento"),e("th",null,"Email"),e("th",null,"Teléfono"),e("th",null,"Acciones")])],-1)),e("tbody",null,[(b(!0),p(k,null,M(_.value,l=>(b(),p("tr",{key:l.id,class:"border-b hover:bg-gray-50"},[e("td",R,a(l.nombres)+" "+a(l.apellidos),1),e("td",null,a(l.tipo_documento)+" "+a(l.documento),1),e("td",null,a(l.email),1),e("td",null,a(l.telefono),1),e("td",q,[e("button",{class:"text-blue-500 bg-indigo-100 rounded p-2",onClick:S=>u("editar",l)},"Editar",8,Q),e("button",{class:"text-red-500 bg-red-100 rounded p-2",onClick:S=>T(c).eliminarPersona(l.id)},"Eliminar",8,H)])]))),128)),_.value.length?$("",!0):(b(),p("tr",J,[...i[2]||(i[2]=[e("td",{colspan:"5",class:"text-center p-4 text-gray-500"}," No hay resultados ",-1)])]))])]),e("div",K,[e("button",{onClick:s,disabled:o.value===1,class:"px-3 py-1 border rounded-md bg-indigo-100"}," Anterior ",8,W),e("span",null,"Página "+a(o.value)+" de "+a(d.value),1),e("button",{onClick:f,disabled:o.value===d.value,class:"px-3 py-1 border rounded-md bg-indigo-100"}," Siguiente ",8,X)])]))}},Z={class:"space-y-6"},ee={class:"mx-auto w-2/3"},ne={__name:"PersonaView",setup(w){const v=C(),u=P(null),c=n=>{u.value={...n}},r=async()=>{u.value=null,await v.fetchPersonas()};return(n,o)=>(b(),p(k,null,[e("div",null,[y(A)]),e("div",Z,[e("div",ee,[y(L,{personaSeleccionada:u.value,onGuardado:r},null,8,["personaSeleccionada"])]),y(Y,{onEditar:c})])],64))}};export{ne as default};
